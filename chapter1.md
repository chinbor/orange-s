# First Chapter

## 一.**保护模式简介**

#### 在保护方式下,全部32条地址线有效,可寻址高达4G字节的物理地址空间;**扩充的存储器分段管理机制和可选的存储器分页管理机制**,不仅为存储器共享和保护提供了硬件支持,而且为实现虚拟存储器提供了硬件支持;支持多任务,能够快速地进行任务切换和保护任务环境;4个特权级和完善的特权检查机制,既能实现资源共享又能保证代码和数据的安全和保密及任务的隔离;支持虚拟8086方式,便于执行8086程序。

## 二.存储管理机制

#### 保护方式下，80386不仅采用扩充的存储器分段管理机制，而且提供可选的存储器分页管理机制，这些存储管理机制由80386存储管理部件MMU实现。

#### 1.目标

#### 在以80386及其以上处理器为CPU的PC兼容机系统中,把地址在1M以下的内存称为常规内存,把地址在1M以上的内存称为扩展内存。

#### 80386 还要对实现虚拟存储器提供支持。虽然与 8086 可寻址的1M字节物理地址空间相比,80386可寻址的物理地址空间可谓很大,但实际的微机系统不可能安装如此达的物理内存。所以,为了运行大型程序和真正实现多任务,必须采用虚拟存储器。

#### 所以,80386既要支持任务隔离,又要支持可共享代码和数据的共享,还要支持特权保护。

#### 2.地址空间和地址转换

#### 保护方式下的虚拟存储器由大小可变的存储块构成,这样的存储块称为段。虚拟存储器的地址\(逻辑地址\)由指示描述符的选择子和段内偏移两部分构成,这样的地址集合称为虚拟地址空间。80386支持的虚拟地址空间可达64T字节。程序员编写程序时使用的存储地址空间是虚拟地址空间,所以,他们可认为有足够大的存储空间可供使用。

#### 虚拟地址空间必须映射到物理地址空间,二维的虚拟地址必须转化成一维的物理地址。每一个任务有一个虚拟地址空间，为了避免多个并行任务的多个虚拟地址空间直接映射到同一个物理地址空间,采用线性地址空间隔离虚拟地址空间和物理地址空间。线性地址空间由一维的线性地址构成,线性地址空间和物理地址空间对等。线性地址32位长,线性地址空间容量为4G字节。

#### 80386 分两步实现虚拟地址空间到物理地址空间到物理地址空间的映射,也就是分两步实现虚拟地址到物理地址的转换,但第二步是可选的。下图是地址映射转换的示意图 

#### ![](https://img-blog.csdn.net/20150312173704225)

### 

### 



